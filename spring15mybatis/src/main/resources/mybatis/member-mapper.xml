<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="member">

	<!-- 
		조회
		- 기본 검색 (type , keyword)
		- 복합검색
		- 계층형검색
	-->
	
	<select id="list" resultType="MemberDto">
		select * from member order by member_id asc
	</select>

	<!-- 
		column은 정적배치이므로 $ 사용, keyword는 동적배치이므로 # 사용
	 -->

	<select id="search" resultType="MemberDto">
		select * from member where instr(${column}, #{keyword}) > 0
		order by ${column} asc, member_id asc
	</select>
	
	<!-- 
		column, keyword 유무에 따라 목록 또는 검색을 실행 
		mybatis 조건식에는 && 대신 and || 대신 or을 사용한다
	-->
	<select id="listOrSearch" resultType="MemberDto">
		select * from member
		<if test="column != null and keyword != null">
		where instr(${column}, #{keyword}) > 0
		order by ${column} asc, member_id asc
		</if>
	</select>

</mapper>